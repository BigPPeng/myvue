{"ast":null,"code":"export default {\n  created() {\n    this.getList();\n  },\n  data() {\n    return {\n      tableData: [],\n      dialogVisible: false,\n      queryForm: {\n        id: \"\",\n        responderName: \"\"\n      },\n      publishNews: {\n        consultantId: \"\",\n        consultantName: \"\",\n        consultationTime: \"\",\n        consultationKeywords: \"\",\n        consultationTitle: \"\",\n        consultationContent: \"\"\n      }\n    };\n  },\n  methods: {\n    async getListByParam() {\n      if (this.queryForm.responderName === \"\") {\n        this.getList();\n        return;\n      }\n      let user = window.sessionStorage.getItem('user');\n      let userObj = JSON.parse(user);\n      this.queryForm.id = userObj.id;\n      const {\n        data: aa\n      } = await this.$http.post(\"/api/consultation/publishConsultation\", this.queryForm);\n      console.log(aa);\n      this.tableData = aa.data;\n    },\n    //搜索获取列表信息\n    async getList() {\n      let user = window.sessionStorage.getItem('user');\n      let userObj = JSON.parse(user);\n      const {\n        data: aa\n      } = await this.$http.post(\"/api/consultation/getConsultationByPublisherId\", {\n        id: userObj.id\n      });\n      console.log(aa);\n      this.tableData = aa.data;\n    },\n    //删除\n    async deleteUser(row) {\n      console.log(row);\n      const userName = row.username;\n      const confirmResult = await this.$confirm('是否确认删除名称为\"' + userName + '\"的用户?', \"提示\", {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err);\n      // 成功删除为confirm 取消为 cancel\n      if (confirmResult != 'confirm') {\n        this.$refs.multipleTable.clearSelection();\n        return this.$message.info(\"已取消删除\");\n      }\n      const {\n        data: bb\n      } = await this.$http.post(\"/api/user/deleteUser\", {\n        id: row.id\n      });\n      this.$message.success(bb);\n      this.getList();\n    },\n    //取消\n    reset() {\n      this.queryForm.userType = null, this.getList();\n    }\n  }\n};","map":{"version":3,"names":["created","getList","data","tableData","dialogVisible","queryForm","id","responderName","publishNews","consultantId","consultantName","consultationTime","consultationKeywords","consultationTitle","consultationContent","methods","getListByParam","user","window","sessionStorage","getItem","userObj","JSON","parse","aa","$http","post","console","log","deleteUser","row","userName","username","confirmResult","$confirm","confirmButtonText","cancelButtonText","type","catch","err","$refs","multipleTable","clearSelection","$message","info","bb","success","reset","userType"],"sources":["src/components/pages/service/ServiceList.vue"],"sourcesContent":["<template>\n  <div>\n    <h3 style=\"margin-top: 0\">农业咨询</h3>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>农业咨询</el-breadcrumb-item>\n      <el-breadcrumb-item>咨询历史</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-card>\n      <el-row :gutter=\"25\">\n        <el-form ref=\"queryForm\" label-width=\"80px\" :inline=\"true\">\n          <el-form-item label=\"专家姓名\" prop = \"responderName\">\n            <el-input v-model=\"queryForm.responderName\"></el-input>\n          </el-form-item>\n\n          <!-- 搜索框 -->\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"getListByParam()\">搜索</el-button>\n            <el-button type=\"primary\" @click=\"reset()\">重置</el-button>\n            <el-button type=\"primary\" @click=\"add()\" style=\"position: absolute; right: -900px;\">咨询</el-button>\n          </el-form-item>\n        </el-form>\n      </el-row>\n\n      <el-table :data=\"tableData\" border style=\"width: 100%\" typle=\"margin-top: 90px;\">\n        <el-table-column label=\"id\" prop=\"id\" />\n        <el-table-column label=\"咨询人id\" prop=\"consultantId\" />\n        <el-table-column label=\"咨询人\" prop=\"consultantName\" />\n        <el-table-column label=\"咨询时间\" prop=\"consultationTime\" />\n        <el-table-column label=\"咨询\" prop=\"consultationContent\" />\n        <el-table-column label=\"咨询关键词\" prop=\"consultationKeywords\" />\n        <el-table-column label=\"专家姓名\" prop=\"responderName\" />\n        <el-table-column label=\"专家id\" prop=\"responderId\" />\n        <el-table-column label=\"回复时间\" prop=\"responseTime\" />\n        <el-table-column label=\"回答内容\" prop=\"responseContent\" />\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n\n            <!-- 删除 -->\n            <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"handleDelete(scope.row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n        <!-- 对话框 -->\n        <el-dialog title=\"咨询\" :visible.sync=\"dialogVisible\" width=\"50%\" @close=\"dialogVisible = false\">\n        <el-form :model=\"publishNews\" ref=\"registerForm\" label-width=\"120px\">1\n          <el-form-item label=\"咨询ID\"  v-show=\"false\">\n            <el-input placeholder=\"咨询ID\" v-model=\"publishNews.consultantId\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"咨询人姓名\">\n            <el-input placeholder=\"咨询人姓名\" v-model=\"publishNews.consultantName\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"咨询时间\">\n            <el-input placeholder=\"咨询时间\" v-model=\"publishNews.consultationTime\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"关键词\"   v-show=\"false\">\n            <el-input placeholder=\"关键词\" v-model=\"publishNews.consultationKeywords\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"咨询标题\"   v-show=\"false\">\n            <el-input placeholder=\"请输入咨询标题\" v-model=\"publishNews.consultationTitle\"></el-input>\n          </el-form-item>\n          <el-form-item>\n          <el-form-item label=\"咨询内容\"   v-show=\"false\">\n            <el-input placeholder=\"请输入咨询内容\" v-model=\"publishNews.consultationContent\"></el-input>\n          </el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm()\">发布</el-button>\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\n          </el-form-item>\n        </el-form>\n      </el-dialog>\n      <div>\n        <el-pagination></el-pagination>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  created() {\n    this.getList();\n  },\n  data() {\n    return {\n      tableData: [\n      ],\n      dialogVisible : false,\n      queryForm: {\n        id:\"\",\n        responderName:\"\"\n      },\n      publishNews :{\n        consultantId:\"\",\n        consultantName:\"\",\n        consultationTime:\"\",\n        consultationKeywords:\"\",\n        consultationTitle:\"\",\n        consultationContent:\"\",\n      }\n    };\n  },\n\n  methods: {\n    async getListByParam() {\n      if (this.queryForm.responderName === \"\") {\n          this.getList();\n          return;\n      }\n      let user = window.sessionStorage.getItem('user');\n      let userObj = JSON.parse(user);\n      this.queryForm.id = userObj.id;\n      const { data: aa } = await this.$http.post(\"/api/consultation/publishConsultation\", this.queryForm);\n      console.log(aa)\n      this.tableData = aa.data;\n    },\n    //搜索获取列表信息\n    async getList() {\n      let user = window.sessionStorage.getItem('user');\n      let userObj = JSON.parse(user);\n      const { data: aa } = await this.$http.post(\"/api/consultation/getConsultationByPublisherId\", { id: userObj.id });\n      console.log(aa)\n      this.tableData = aa.data;\n    },\n    //删除\n    async deleteUser(row) {\n      console.log(row)\n      const userName = row.username;\n      const confirmResult = await this.$confirm('是否确认删除名称为\"' + userName + '\"的用户?', \"提示\", {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err)\n      // 成功删除为confirm 取消为 cancel\n      if (confirmResult != 'confirm') {\n        this.$refs.multipleTable.clearSelection();\n        return this.$message.info(\"已取消删除\");\n      }\n      const { data: bb } = await this.$http.post(\"/api/user/deleteUser\", { id: row.id });\n      this.$message.success(bb);\n      this.getList();\n    },\n    //取消\n    reset() {\n      this.queryForm.userType = null,\n        this.getList();\n    }\n  }\n\n};\n</script>\n\n<style lang=\"less\" scoped>\n.el-breadcrumb {\n  margin-bottom: 15px;\n  font-size: 17px;\n}\n</style>\n"],"mappings":"AA8EA;EACAA,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,KAAA;IACA;MACAC,SAAA,IACA;MACAC,aAAA;MACAC,SAAA;QACAC,EAAA;QACAC,aAAA;MACA;MACAC,WAAA;QACAC,YAAA;QACAC,cAAA;QACAC,gBAAA;QACAC,oBAAA;QACAC,iBAAA;QACAC,mBAAA;MACA;IACA;EACA;EAEAC,OAAA;IACA,MAAAC,eAAA;MACA,SAAAX,SAAA,CAAAE,aAAA;QACA,KAAAN,OAAA;QACA;MACA;MACA,IAAAgB,IAAA,GAAAC,MAAA,CAAAC,cAAA,CAAAC,OAAA;MACA,IAAAC,OAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAN,IAAA;MACA,KAAAZ,SAAA,CAAAC,EAAA,GAAAe,OAAA,CAAAf,EAAA;MACA;QAAAJ,IAAA,EAAAsB;MAAA,eAAAC,KAAA,CAAAC,IAAA,+CAAArB,SAAA;MACAsB,OAAA,CAAAC,GAAA,CAAAJ,EAAA;MACA,KAAArB,SAAA,GAAAqB,EAAA,CAAAtB,IAAA;IACA;IACA;IACA,MAAAD,QAAA;MACA,IAAAgB,IAAA,GAAAC,MAAA,CAAAC,cAAA,CAAAC,OAAA;MACA,IAAAC,OAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAN,IAAA;MACA;QAAAf,IAAA,EAAAsB;MAAA,eAAAC,KAAA,CAAAC,IAAA;QAAApB,EAAA,EAAAe,OAAA,CAAAf;MAAA;MACAqB,OAAA,CAAAC,GAAA,CAAAJ,EAAA;MACA,KAAArB,SAAA,GAAAqB,EAAA,CAAAtB,IAAA;IACA;IACA;IACA,MAAA2B,WAAAC,GAAA;MACAH,OAAA,CAAAC,GAAA,CAAAE,GAAA;MACA,MAAAC,QAAA,GAAAD,GAAA,CAAAE,QAAA;MACA,MAAAC,aAAA,cAAAC,QAAA,gBAAAH,QAAA;QACAI,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAC,KAAA,CAAAC,GAAA,IAAAA,GAAA;MACA;MACA,IAAAN,aAAA;QACA,KAAAO,KAAA,CAAAC,aAAA,CAAAC,cAAA;QACA,YAAAC,QAAA,CAAAC,IAAA;MACA;MACA;QAAA1C,IAAA,EAAA2C;MAAA,eAAApB,KAAA,CAAAC,IAAA;QAAApB,EAAA,EAAAwB,GAAA,CAAAxB;MAAA;MACA,KAAAqC,QAAA,CAAAG,OAAA,CAAAD,EAAA;MACA,KAAA5C,OAAA;IACA;IACA;IACA8C,MAAA;MACA,KAAA1C,SAAA,CAAA2C,QAAA,SACA,KAAA/C,OAAA;IACA;EACA;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}