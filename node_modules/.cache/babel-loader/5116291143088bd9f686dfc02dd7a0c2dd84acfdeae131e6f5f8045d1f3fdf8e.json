{"ast":null,"code":"export default {\n  created() {\n    this.getList();\n  },\n  data() {\n    return {\n      //搜索获取列表信息\n      async getList() {\n        let user = window.sessionStorage.getItem('user');\n        let userObj = JSON.parse(user);\n        const {\n          data: aa\n        } = await this.$http.post(\"/api/product/getAllRentProductByPublishId\", {\n          id: userObj.id\n        });\n        console.log(aa);\n        this.tableData = aa.data;\n      },\n      tableData: [],\n      dialogVisible: false,\n      publishRent: {\n        productType: \"\",\n        price: \"\",\n        quantity: \"\",\n        sellerUserId: \"\"\n      }\n    };\n  },\n  methods: {\n    gotoPublish() {\n      let user = window.sessionStorage.getItem('user');\n      let userObj = JSON.parse(user);\n      this.publishRent.recruitmentUserId = userObj.id;\n      this.dialogVisible = true;\n    },\n    async submitForm() {\n      const {\n        data: aa\n      } = await this.$http.post(\"/api/product/addRentProduct\", this.publishRent);\n      // status ==0 表示成功，成功后要关闭弹窗，并且清空弹窗中的内容，刷新列表\n      if (aa.status === 0) {\n        this.publishRent.productType = \"\";\n        this.publishRent.price = \"\";\n        this.publishRent.quantity = \"\";\n        this.publishRent.sellerUserId = \"\";\n        this.dialogVisible = false;\n        this.$message.success(\"发布成功\");\n        this.getList();\n      } else {\n        this.$message.fail(\"发布失败\" + aa.message);\n      }\n    }\n  },\n  //删除\n  async deleteUser(row) {\n    console.log(row);\n    const userName = row.username;\n    const confirmResult = await this.$confirm('是否确认删除名称为\"' + userName + '\"的用户?', \"提示\", {\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      type: 'warning'\n    }).catch(err => err);\n    // 成功删除为confirm 取消为 cancel\n    if (confirmResult != 'confirm') {\n      this.$refs.multipleTable.clearSelection();\n      return this.$message.info(\"已取消删除\");\n    }\n    const {\n      data: bb\n    } = await this.$http.post(\"/api/user/deleteUser\", {\n      id: row.id\n    });\n    this.$message.success(bb);\n    this.getList();\n  }\n};","map":{"version":3,"names":["created","getList","data","user","window","sessionStorage","getItem","userObj","JSON","parse","aa","$http","post","id","console","log","tableData","dialogVisible","publishRent","productType","price","quantity","sellerUserId","methods","gotoPublish","recruitmentUserId","submitForm","status","$message","success","fail","message","deleteUser","row","userName","username","confirmResult","$confirm","confirmButtonText","cancelButtonText","type","catch","err","$refs","multipleTable","clearSelection","info","bb"],"sources":["src/components/pages/rent/RentNews.vue"],"sourcesContent":["<template>\n  <div>\n    <h3 style=\"margin-top: 0\">发布租用信息</h3>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>农具租用</el-breadcrumb-item>\n      <el-breadcrumb-item>发布租用信息</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-card>\n      <el-row :gutter=\"25\">\n\n        <el-col :span=\"5\">\n          <el-button type=\"primary\" @click=\"gotoPublish()\">发布租用信息</el-button>\n        </el-col>\n\n      </el-row>\n\n      <el-table :data=\"tableData\" border style=\"width: 100%\" typle=\"margin-top: 90px;\">\n        <el-table-column label=\"类型\" prop=\"productType\" />\n        <el-table-column label=\"出租价格\" prop=\"price\" />\n        <el-table-column label=\"数量\" prop=\"quantity\" />\n        <el-table-column label=\"卖家ID\" prop=\"sellerUserId\" />\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <!-- 修改 -->\n            <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"edit(scope.row)\">修改</el-button>\n            <!-- 删除 -->\n            <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"handleDelete(scope.row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!-- 对话框 -->\n      <el-dialog title=\"发布租用信息\" :visible.sync=\"dialogVisible\" width=\"50%\" @close=\"dialogVisible = false\">\n        <el-form :model=\"publishRent\" ref=\"registerForm\" label-width=\"120px\">\n          <el-form-item label=\"类型\"  v-show=\"false\">\n            <el-input placeholder=\"请输入标题\" v-model=\"publishRent.productType\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"出租价格\">\n            <el-input placeholder=\"请输入出租价格\" v-model=\"publishRent.price\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"出租数量\">\n            <el-input placeholder=\"请输入出租数量\" v-model=\"publishRent.quantity\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"出租人ID\"   v-show=\"false\">\n            <el-input placeholder=\"请输入标题\" v-model=\"publishRent.sellerUserId\"></el-input>\n          </el-form-item>\n          <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm()\">发布</el-button>\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\n          </el-form-item>\n        </el-form>\n      </el-dialog>\n      <div>\n        <el-pagination></el-pagination>\n      </div>\n    </el-card>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  created() {\n    this.getList();\n  },\n  data() {\n    return {\n      //搜索获取列表信息\n      async getList() {\n        let user = window.sessionStorage.getItem('user');\n        let userObj = JSON.parse(user);\n        const { data: aa } = await this.$http.post(\"/api/product/getAllRentProductByPublishId\", { id: userObj.id });\n        console.log(aa)\n        this.tableData = aa.data;\n      },\n      tableData: [],\n      dialogVisible: false,\n      publishRent: {\n        productType: \"\",\n        price: \"\",\n        quantity: \"\",\n        sellerUserId: \"\",\n      },\n    };\n  },\n  methods: {\n    gotoPublish() {\n      let user = window.sessionStorage.getItem('user');\n      let userObj = JSON.parse(user);\n      this.publishRent.recruitmentUserId = userObj.id;\n      this.dialogVisible = true;\n    },\n    async submitForm() {\n      const { data: aa } = await this.$http.post(\"/api/product/addRentProduct\", this.publishRent);\n      // status ==0 表示成功，成功后要关闭弹窗，并且清空弹窗中的内容，刷新列表\n      if (aa.status === 0) {\n        this.publishRent.productType = \"\";\n        this.publishRent.price = \"\";\n        this.publishRent.quantity = \"\";\n        this.publishRent.sellerUserId = \"\";\n        this.dialogVisible = false;\n        this.$message.success(\"发布成功\");\n        this.getList();\n      } else {\n        this.$message.fail(\"发布失败\" + aa.message);\n      }\n    },\n  },\n\n  //删除\n  async deleteUser(row) {\n    console.log(row)\n    const userName = row.username;\n    const confirmResult = await this.$confirm('是否确认删除名称为\"' + userName + '\"的用户?', \"提示\", {\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      type: 'warning'\n    }).catch(err => err)\n    // 成功删除为confirm 取消为 cancel\n    if (confirmResult != 'confirm') {\n      this.$refs.multipleTable.clearSelection();\n      return this.$message.info(\"已取消删除\");\n    }\n    const { data: bb } = await this.$http.post(\"/api/user/deleteUser\", { id: row.id });\n    this.$message.success(bb);\n    this.getList();\n  },\n\n};\n</script>\n\n<style lang=\"less\" scoped>\n.el-breadcrumb {\n  margin-bottom: 15px;\n  font-size: 17px;\n}\n</style>"],"mappings":"AA6DA;EACAA,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,KAAA;IACA;MACA;MACA,MAAAD,QAAA;QACA,IAAAE,IAAA,GAAAC,MAAA,CAAAC,cAAA,CAAAC,OAAA;QACA,IAAAC,OAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAN,IAAA;QACA;UAAAD,IAAA,EAAAQ;QAAA,eAAAC,KAAA,CAAAC,IAAA;UAAAC,EAAA,EAAAN,OAAA,CAAAM;QAAA;QACAC,OAAA,CAAAC,GAAA,CAAAL,EAAA;QACA,KAAAM,SAAA,GAAAN,EAAA,CAAAR,IAAA;MACA;MACAc,SAAA;MACAC,aAAA;MACAC,WAAA;QACAC,WAAA;QACAC,KAAA;QACAC,QAAA;QACAC,YAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACA,IAAArB,IAAA,GAAAC,MAAA,CAAAC,cAAA,CAAAC,OAAA;MACA,IAAAC,OAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAN,IAAA;MACA,KAAAe,WAAA,CAAAO,iBAAA,GAAAlB,OAAA,CAAAM,EAAA;MACA,KAAAI,aAAA;IACA;IACA,MAAAS,WAAA;MACA;QAAAxB,IAAA,EAAAQ;MAAA,eAAAC,KAAA,CAAAC,IAAA,qCAAAM,WAAA;MACA;MACA,IAAAR,EAAA,CAAAiB,MAAA;QACA,KAAAT,WAAA,CAAAC,WAAA;QACA,KAAAD,WAAA,CAAAE,KAAA;QACA,KAAAF,WAAA,CAAAG,QAAA;QACA,KAAAH,WAAA,CAAAI,YAAA;QACA,KAAAL,aAAA;QACA,KAAAW,QAAA,CAAAC,OAAA;QACA,KAAA5B,OAAA;MACA;QACA,KAAA2B,QAAA,CAAAE,IAAA,UAAApB,EAAA,CAAAqB,OAAA;MACA;IACA;EACA;EAEA;EACA,MAAAC,WAAAC,GAAA;IACAnB,OAAA,CAAAC,GAAA,CAAAkB,GAAA;IACA,MAAAC,QAAA,GAAAD,GAAA,CAAAE,QAAA;IACA,MAAAC,aAAA,cAAAC,QAAA,gBAAAH,QAAA;MACAI,iBAAA;MACAC,gBAAA;MACAC,IAAA;IACA,GAAAC,KAAA,CAAAC,GAAA,IAAAA,GAAA;IACA;IACA,IAAAN,aAAA;MACA,KAAAO,KAAA,CAAAC,aAAA,CAAAC,cAAA;MACA,YAAAjB,QAAA,CAAAkB,IAAA;IACA;IACA;MAAA5C,IAAA,EAAA6C;IAAA,eAAApC,KAAA,CAAAC,IAAA;MAAAC,EAAA,EAAAoB,GAAA,CAAApB;IAAA;IACA,KAAAe,QAAA,CAAAC,OAAA,CAAAkB,EAAA;IACA,KAAA9C,OAAA;EACA;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}